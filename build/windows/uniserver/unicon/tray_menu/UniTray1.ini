[Config]
ID=UniTrayController1
ImageList=menu_icons.dat
ServiceGlyphRunning=2
ServiceGlyphPaused=18
ServiceGlyphStopped=18
;TrayIconAllRunning=9
;TrayIconSomeRunning=10
;TrayIconNoneRunning=11
AboutHeader=UniTray UniServer V5-Nano
AboutVersion=V5.0
;TrayIcon=tray_image_1.dat
TrayIcon=zentao.dat

[AboutText]
UniTray is a small tray icon for the Uniform Server. The main system, Aestan Tray Icon was developed by Onno Broekmans using Borland Delphi for another server and as since then being licensed under the Creative Commons for Public Domain.

UniTray packs most of the functionality that Admin Panel provides into a single Tray Icon! UniTray is fully customisable allowing you to tailor it to your own requirements.

[Variables]
;Type: prompt; Name: PUserName; PromptCaption: "Uniform Server"; PromptText: "Please enter the name of the user whose credentials you want to change/add:"; DefaultValue: "Guest"
; The next line contains the declaration of the %USRoot% variable; it should
; point to the root directory of the Uniform Server package

; Gets the root path as specified on the command line
Type: commandline; Name: top;  ParamName: "ustop"
Type: static; Name: USRoot; Value: "%top%"; Flags: ispath
Type: static; Name: LocalRoot; Value: "%top%\usr\local"
Type: static; Name: UsrRoot; Value: "%top%\usr"
Type: static; Name: ServerRoot; Value: "%top%\www"
Type: static; Name: PHP; Value: "%top%\usr\local\php"
Type: static; Name: ServerCon; Value: "%top%\unicon"
Type: static; Name: ServerConMain; Value: "%top%\unicon\main"
Type: static; Name: UniTray; Value: "%top%\unicon\tray_menu"

[Menu.Left.Settings]
AutoLineReduction=no
AutoHotKeys=no
BarVisible=yes
BarPictureHorzAlignment=center
BarPictureOffsetX=0
BarPictureOffsetY=0
BarPicturePicture=menu_image_left.dat
BarPictureTransparent=no
BarPictureVertAlignment=middle
BarBorder=clNone
BarSide=left
BarSpace=0
BarWidth=50
SeparatorsAlignment=center

[Menu.Right.Settings]
AutoLineReduction=no
AutoHotKeys=no
BarVisible=yes
BarPictureHorzAlignment=center
BarPictureOffsetX=0
BarPictureOffsetY=0
BarPicturePicture=menu_image_right.dat
BarPictureTransparent=no
BarPictureVertAlignment=middle
BarBorder=clNone
BarSide=left
BarSpace=0
BarWidth=50
SeparatorsAlignment=center

[DoubleClickAction]
Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 1";

;=== LEFT MENU ============
[Menu.Left]
Type: item; Caption: "启动Apache和MySQL进程"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\start_servers.php 7";ShowCmd: hidden; Glyph: 9
Type: item; Caption: "停止Apache和MySQL进程"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\stop_servers.php 7";ShowCmd: hidden; Glyph: 11

Type: separator
Type: item; Caption: "安装Apache和MySQL为服务并运行"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\service_install_run.php 7";ShowCmd: hidden; Glyph: 0
Type: item; Caption: "停止Apache和MySQL并移除服务"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\service_stop_uninstall.php  7";ShowCmd: hidden; Glyph: 1

Type: separator
Type: item; Caption: "检查UniServer运行状态"; Action: multi; Actions: ServerStatus; Glyph: 14
Type: submenu; Caption: "Apache和MySQL高级管理"; SubMenu: Individual_unicontrol; Glyph: 3
Type: submenu; Caption: "Apache和MySQL信息及日志"; SubMenu: ServerInfo; Glyph: 14
Type: submenu; Caption: "Apache、MySQL和PHP配置"; SubMenu: Advanced; Glyph: 7

Type: separator
Type: item; Caption: "访问本机禅道"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 8";ShowCmd: hidden; Glyph: 4
Type: item; Caption: "禅道官方网站"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 9";ShowCmd: hidden; Glyph: 4

Type: separator
Type: item; Caption: "访问管理面板"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 1";ShowCmd: hidden; Glyph: 4
Type: item; Caption: "访问phpMyAdmin"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 2";ShowCmd: hidden; Glyph: 4
Type: item; Caption: "访问本机首页"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 3";ShowCmd: hidden; Glyph: 4

Type: separator
Type: item; Caption: "重载加载菜单"; Action: readconfig; Glyph: 15
Type: item; Caption: "UniServer帮助"; Action: run; FileName: "%ServerCon%\docs\Run.bat"; ShowCmd: hidden; Glyph: 18
Type: item; Caption: "关于UniServer"; Action: about; Glyph: 14

Type: separator
Type: item; Caption: "退出"; Action: exit; Glyph: 16

[Individual_unicontrol]
Type: item; Caption: "启动Apache进程"; Action: shellexecute; FileName: "%PHP%\php-win.exe"; Parameters: " -n %ServerConMain%\start_servers.php 1"; Glyph: 9
Type: item; Caption: "停止Apache进程"; Action: shellexecute; FileName: "%PHP%\php-win.exe"; Parameters: " -n %ServerConMain%\stop_servers.php 1"; Glyph: 11

Type: separator
Type: item; Caption: "启动MySQL进程"; Action: shellexecute; FileName: "%PHP%\php-win.exe"; Parameters: " -n %ServerConMain%\start_servers.php 2"; Glyph: 9
Type: item; Caption: "停止MySQL进程"; Action: shellexecute; FileName: "%PHP%\php-win.exe"; Parameters: " -n %ServerConMain%\stop_servers.php 2"; Glyph: 11

Type: separator
Type: item; Caption: "安装Apache为服务并运行"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\service_install_run.php 1"; Glyph: 0
Type: item; Caption: "停止Apache并移除服务"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\service_stop_uninstall.php 1"; Glyph: 1

Type: separator
Type: item; Caption: "安装MySQL为服务并运行"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\service_install_run.php 2"; Glyph: 0
Type: item; Caption: "停止MySQL并移除服务"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %ServerConMain%\service_stop_uninstall.php 2"; Glyph: 1

;=== RIGHT MENU ============
[Menu.Right]
Type: item; Caption: "退出"; Action: exit; Glyph: 16

;=== COMMON LEFT RIGHT =======
[Advanced]
Type: item; Caption: "检查Apache配置"; Action: multi; Actions: ApacheSyntaxCheck; Glyph: 14
Type: item; Caption: "修改Apache配置"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\apache2\conf\httpd.conf"; Glyph: 7

Type: separator
Type: item; Caption: "恢复MySQL密码"; Action: run; FileName: "%ServerCon%\restore_mysql_password\Run_restore.bat"; Glyph: 9
Type: item; Caption: "修改MySQL配置"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\mysql\my.ini"; Glyph: 7

Type: separator
Type: item; Caption: "修改生产环境所用的php.ini"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\php\php.ini_production_nano"; Glyph: 7
Type: item; Caption: "修改开发环境所用的php.ini"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\php\php.ini_delvelopment_nano"; Glyph: 7

Type: separator
Type: item; Caption: "切换php到生产环境配置";  Action: shellexecute; FileName: "%ServerCon%\php_dev_production\Switch_production.bat"; Parameters: " pro"; Glyph: 9
Type: item; Caption: "切换php到开发环境配置"; Action: shellexecute; FileName: "%ServerCon%\php_dev_production\Switch_Development.bat"; Parameters: " dev"; Glyph: 9

;Type: separator
;Type: item; Caption: "Start Portable Cron"; Action: shellexecute; FileName: "%PHP%\php-win.exe"; Parameters: " -n %ServerConMain%\start_servers.php 16"; Glyph: 9
;Type: item; Caption: "Stop  Portable Cron"; Action: shellexecute; FileName: "%PHP%\php-win.exe"; Parameters: " -n %ServerConMain%\stop_servers.php 16"; Glyph: 11

; Server information and Logs
[ServerInfo]
Type: item; Caption: "Apache服务信息"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 5";ShowCmd: hidden; Glyph: 4
Type: item; Caption: "Apache服务状态"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 6";ShowCmd: hidden; Glyph: 4
Type: item; Caption: "PHP环境信息"; Action: shellexecute; FileName: "%PHP%\php.exe"; Parameters: " -n %UniTray%\unitray_info.php 7";ShowCmd: hidden; Glyph: 4

Type: separator
Type: item; Caption: "Apache错误日志"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\apache2\logs\error.log"; Glyph: 18
Type: item; Caption: "Apache访问日志"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\apache2\logs\access.log"; Glyph: 18

;Type: separator
;Type: item; Caption: "Apache SSL Error Log"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\apache2\logs\error_ssl.log"; Glyph: 18
;Type: item; Caption: "Apache SSL Access Log"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\apache2\logs\access_ssl.log"; Glyph: 18

Type: separator
Type: item; Caption: "MySQL错误日志"; Action: shellexecute; FileName: "%Windows%\Notepad.exe"; Parameters: "%LocalRoot%\mysql\data\mysql.err"; Glyph: 18

[ServerStatus]
Action: run; FileName: "%ServerConMain%\server_status.bat"

[ApacheSyntaxCheck]
Action: run; FileName: "%ServerConMain%\apache_syntax_check.bat"
